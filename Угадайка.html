<meta charset="utf-8">
<script type="text/javascript">

	function isValid(number){
		if(number >= 1 && number <= 20 || number == 'q')
		{
			return true;
		} else {
			return false;
		}
	}


	function changePlayer(player){
		if(player == 1)
		{
			return 2
		} else {
			return 1
		}
	}

	
	function isValid2(number){
		if(number == answer + 1 || number == answer -1){
			return true;
		} else {
			return false;
		}
	}


	function getValidAnswer(){
	while(true)
	{
		var user_answer = prompt("Игрок " + player + " Введите число от 1 до 20")
		if(!isValid(user_answer)){
			alert("Ну я же просил от 1 ло 20")
		} else
		return user_answer
	}
}


	function getrandomInt(min, max)
{
	return Math.round(Math.random() * (max -min)) + min;
}



	var answer = getrandomInt(1,20);
	var tryCount = 0;
	var player = 1;
	alert("Мы начинаем игру Угадайка. У вас есть неограниченное количество попыток.")


	do
	{
		tryCount++;

		var user_answer = getValidAnswer();
		if(user_answer == "q") {
			alert("Игра окончена. ПРавильный ответ " + answer);
			break;
		} else if(user_answer == answer){
			alert("Поздравляю вы выиграили! Правильный ответ " + answer + " Вы справились за " + tryCount + " попыток");
			break;
		} else if(isValid2(user_answer)){
			alert("Вы почти угадали! Попробуйте ещё");
		} else {
			alert("Вы не угадали! Попробуйте ещё раз!");}
		player = changePlayer(player);	
	} while( tryCount > 0);
alert("Игра окончена.");

</script>